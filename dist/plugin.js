!function(e,n){"object"==typeof exports&&"object"==typeof module?module.exports=n():"function"==typeof define&&define.amd?define([],n):"object"==typeof exports?exports.FetchWorker=n():e.FetchWorker=n()}(this,function(){return function(e){function n(g){if(t[g])return t[g].exports;var I=t[g]={i:g,l:!1,exports:{}};return e[g].call(I.exports,I,I.exports,n),I.l=!0,I.exports}var t={};return n.m=e,n.c=t,n.i=function(e){return e},n.d=function(e,t,g){n.o(e,t)||Object.defineProperty(e,t,{configurable:!1,enumerable:!0,get:g})},n.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return n.d(t,"a",t),t},n.o=function(e,n){return Object.prototype.hasOwnProperty.call(e,n)},n.p="",n(n.s=0)}([function(module,__webpack_exports__,__webpack_require__){"use strict";eval("Object.defineProperty(__webpack_exports__, \"__esModule\", { value: true });\nvar request = {\n    method: 'GET',\n    mode: 'cors',\n    cache: 'default',\n    redirect: 'follow',\n    headers: {\n        'Content-Type': 'application/json'\n    }\n};\n\nvar tasks = {};\n\nvar onmessage = function onmessage(event) {\n    var _event$data = event.data,\n        id = _event$data.id,\n        query = _event$data.query;\n\n    fetch(query.url, query.request).then(function (response) {\n        return response.json();\n    }).then(function (json) {\n        postMessage({ id: id, data: json });\n    }).catch(function (ex) {\n        postMessage({ id: id, error: ex });\n    });\n};\n\nvar blob = new Blob(['onmessage = ' + String(onmessage)], {\n    type: \"text\\/javascript\"\n});\n\nvar worker = new Worker(URL.createObjectURL(blob));\n\nworker.addEventListener('message', function (event) {\n    var _event$data2 = event.data,\n        id = _event$data2.id,\n        data = _event$data2.data;\n\n    tasks[id].res(data);\n    delete tasks[id];\n}, false);\n\nvar API = {\n    fetch: function fetch(url) {\n        var req = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : request;\n\n        var id = Math.random() * 1000 + '_' + Date.now();\n        tasks[id] = function () {\n            var res = void 0,\n                rej = void 0;\n            var promise = new Promise(function (resolve, reject) {\n                res = resolve;\n                rej = reject;\n            });\n            return {\n                promise: promise,\n                res: res,\n                rej: rej\n            };\n        }();\n\n        var query = {\n            url: url || 'http://localhost:3000/api/List',\n            request: req\n        };\n\n        worker.postMessage({ id: id, query: query });\n\n        return tasks[id].promise;\n    }\n};\n\n/* harmony default export */ __webpack_exports__[\"default\"] = API;//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiMC5qcyIsInNvdXJjZXMiOlsid2VicGFjazovLy9saWIvcGx1Z2luL2luZGV4LmpzP2EzYjUiXSwic291cmNlc0NvbnRlbnQiOlsiY29uc3QgcmVxdWVzdCA9IHtcbiAgICBtZXRob2Q6ICdHRVQnLFxuICAgIG1vZGU6ICdjb3JzJyxcbiAgICBjYWNoZTogJ2RlZmF1bHQnLFxuICAgIHJlZGlyZWN0OiAnZm9sbG93JyxcbiAgICBoZWFkZXJzOiB7XG4gICAgICAgICdDb250ZW50LVR5cGUnOiAnYXBwbGljYXRpb24vanNvbidcbiAgICB9XG59O1xuXG5jb25zdCB0YXNrcyA9IHt9O1xuXG5jb25zdCBvbm1lc3NhZ2UgPSBmdW5jdGlvbihldmVudCkge1xuICAgIGNvbnN0IHsgaWQsIHF1ZXJ5IH0gPSBldmVudC5kYXRhO1xuICAgIGZldGNoKHF1ZXJ5LnVybCwgcXVlcnkucmVxdWVzdClcbiAgICAgICAgLnRoZW4oZnVuY3Rpb24gKHJlc3BvbnNlKSB7XG4gICAgICAgICAgICByZXR1cm4gcmVzcG9uc2UuanNvbigpO1xuICAgICAgICB9KS50aGVuKGZ1bmN0aW9uIChqc29uKSB7XG4gICAgICAgICAgICBwb3N0TWVzc2FnZSh7IGlkLCBkYXRhOiBqc29uIH0pO1xuICAgICAgICB9KS5jYXRjaChmdW5jdGlvbiAoZXgpIHtcbiAgICAgICAgICAgIHBvc3RNZXNzYWdlKHsgaWQsIGVycm9yOiBleCB9KTtcbiAgICAgICAgfSk7XG59XG5cbmNvbnN0IGJsb2IgPSBuZXcgQmxvYihbYG9ubWVzc2FnZSA9ICR7U3RyaW5nKG9ubWVzc2FnZSl9YF0sIHtcbiAgICB0eXBlOiBcInRleHRcXC9qYXZhc2NyaXB0XCJcbn0pO1xuXG5jb25zdCB3b3JrZXIgPSBuZXcgV29ya2VyKFxuICBVUkwuY3JlYXRlT2JqZWN0VVJMKGJsb2IpXG4pO1xuXG53b3JrZXIuYWRkRXZlbnRMaXN0ZW5lcignbWVzc2FnZScsIChldmVudCkgPT4ge1xuICAgIGNvbnN0IHsgaWQsIGRhdGEgfSA9IGV2ZW50LmRhdGE7XG4gICAgdGFza3NbaWRdLnJlcyhkYXRhKTtcbiAgICBkZWxldGUgdGFza3NbaWRdO1xufSwgZmFsc2UpO1xuXG5jb25zdCBBUEkgPSB7XG4gICAgZmV0Y2g6IGZ1bmN0aW9uICh1cmwsIHJlcSA9IHJlcXVlc3QpIHtcbiAgICAgICAgY29uc3QgaWQgPSBgJHsoTWF0aC5yYW5kb20oKSAqIDEwMDApfV8ke0RhdGUubm93KCl9YDtcbiAgICAgICAgdGFza3NbaWRdID0gKCgpID0+IHtcbiAgICAgICAgICAgIGxldCByZXMsIHJlajtcbiAgICAgICAgICAgIGNvbnN0IHByb21pc2UgPSBuZXcgUHJvbWlzZShmdW5jdGlvbiAocmVzb2x2ZSwgcmVqZWN0KSB7XG4gICAgICAgICAgICAgICAgcmVzID0gcmVzb2x2ZTtcbiAgICAgICAgICAgICAgICByZWogPSByZWplY3Q7XG4gICAgICAgICAgICB9KTtcbiAgICAgICAgICAgIHJldHVybiB7XG4gICAgICAgICAgICAgICAgcHJvbWlzZSxcbiAgICAgICAgICAgICAgICByZXMsXG4gICAgICAgICAgICAgICAgcmVqXG4gICAgICAgICAgICB9O1xuICAgICAgICB9KSgpO1xuXG4gICAgICAgIGNvbnN0IHF1ZXJ5ID0ge1xuICAgICAgICAgICAgdXJsOiB1cmwgfHwgJ2h0dHA6Ly9sb2NhbGhvc3Q6MzAwMC9hcGkvTGlzdCcsXG4gICAgICAgICAgICByZXF1ZXN0OiByZXFcbiAgICAgICAgfTtcblxuICAgICAgICB3b3JrZXIucG9zdE1lc3NhZ2UoeyBpZCwgcXVlcnkgfSk7XG5cbiAgICAgICAgcmV0dXJuIHRhc2tzW2lkXS5wcm9taXNlO1xuICAgIH1cbn07XG5cbmV4cG9ydCBkZWZhdWx0IEFQSTtcblxuXG5cbi8vIFdFQlBBQ0sgRk9PVEVSIC8vXG4vLyBsaWIvcGx1Z2luL2luZGV4LmpzIl0sIm1hcHBpbmdzIjoiQUFBQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQURBO0FBTEE7QUFDQTtBQVNBO0FBQ0E7QUFDQTtBQUFBO0FBQUE7QUFBQTtBQUNBO0FBQ0E7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQURBO0FBQ0E7QUFHQTtBQUNBO0FBR0E7QUFBQTtBQUFBO0FBQUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUFBO0FBQ0E7QUFBQTtBQUNBO0FBQ0E7QUFBQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFIQTtBQUtBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFGQTtBQUNBO0FBSUE7QUFDQTtBQUNBO0FBQ0E7QUF4QkE7QUFDQTtBQTBCQTsiLCJzb3VyY2VSb290IjoiIn0=")}])});